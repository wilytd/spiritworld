# ============================================================
# Aegis Mesh — Home Server Configuration
# ============================================================
# Copy to .env and edit before running:
#   cp .env.homelab .env
#   docker compose -f docker-compose.homelab.yml up -d
# ============================================================

# ── Server Identity ─────────────────────────────────────────
# REQUIRED: Set this to your server's LAN IP so the dashboard
# can reach the API from any browser on your network.
# Find it with:  hostname -I | awk '{print $1}'
HOMELAB_IP=192.168.1.100

# ── Port Mapping ────────────────────────────────────────────
# Change these if you have port conflicts on the host.
CORE_PORT=8000
NETWORK_PORT=8002
DASHBOARD_PORT=3000
DB_PORT=5432
MESH_PORT=8001
OLLAMA_PORT=11434

# ── Database ────────────────────────────────────────────────
# Change the password before first run. Once the DB volume is
# created, changing these requires wiping aegis-db-data.
POSTGRES_USER=aegis
POSTGRES_PASSWORD=change-me-before-first-run
POSTGRES_DB=aegis

# ── Email Notifications ────────────────────────────────────
# Leave blank to disable. Works with Gmail (use App Password),
# Mailgun, SendGrid, or any SMTP server.
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_ADDRESS=
SMTP_USE_TLS=true

# ── Webhook Notifications ──────────────────────────────────
# Paste full webhook URLs. Leave blank to disable.
WEBHOOK_URL=
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=

# ── Scheduler ──────────────────────────────────────────────
SCHEDULER_DUE_WARNING_HOURS=24
SCHEDULER_OVERDUE_CHECK_INTERVAL=3600
SCHEDULER_SNOOZE_CHECK_INTERVAL=300

# ── Network Integrations ───────────────────────────────────
# Configure the ones you have; leave the rest blank.
# The controller gracefully degrades when credentials are empty.

# OPNsense firewall
OPNSENSE_URL=
OPNSENSE_KEY=
OPNSENSE_SECRET=
OPNSENSE_VERIFY_SSL=false

# Unifi controller
UNIFI_URL=
UNIFI_USER=
UNIFI_PASS=
UNIFI_SITE=default
UNIFI_VERIFY_SSL=false

# Pi-hole DNS
PIHOLE_URL=
PIHOLE_TOKEN=

# AdGuard Home DNS (alternative to Pi-hole)
ADGUARD_URL=
ADGUARD_USER=
ADGUARD_PASS=

# ── Meshtastic ─────────────────────────────────────────────
# Only needed if you use --profile mesh.
# Check device path with:  ls /dev/ttyUSB* /dev/ttyACM*
MESH_DEVICE_PATH=/dev/ttyUSB0

# ── Plugin System ──────────────────────────────────────────
PLUGINS_ENABLED=true
PLUGINS_DIR=./plugins
PLUGINS_AUTO_DISCOVER=true
PLUGINS_ENABLED_LIST=
PLUGINS_DISABLED_LIST=

# ── LLM / AI Analysis ─────────────────────────────────────
# Set to true and configure at least one provider below.
# Or start Ollama with --profile llm for local inference.
LLM_ENABLED=false
LLM_PROVIDER_PRIORITY=ollama,openai,anthropic
LLM_ENABLE_ANALYSIS=false
LLM_ANALYSIS_SCHEDULE=0 6 * * *

# Ollama (local, runs in Docker with --profile llm)
OLLAMA_URL=http://ollama:11434
OLLAMA_MODEL=llama3.2
OLLAMA_TIMEOUT=120.0

# OpenAI
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
OPENAI_TIMEOUT=60.0
OPENAI_MAX_TOKENS=2048

# Anthropic
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-sonnet-4-20250514
ANTHROPIC_TIMEOUT=60.0
ANTHROPIC_MAX_TOKENS=2048
